window.CHUIJSLIB;window.jQuery?window.CHUIJSLIB=window.jQuery:window.$chocolatechipjs&&(window.CHUIJSLIB=window.$chocolatechipjs),function(n){function o(n){return"tagName"in n?n:n.parentNode}function c(n,t,i,r){return Math.abs(n-t)>=Math.abs(i-r)?n-t>0?"left":"right":i-r>0?"up":"down"}function a(){if(r=null,t.last)try{t&&t.el&&(t.el.trigger("longtap"),t={})}catch(n){}}function s(){r&&clearTimeout(r);r=null}function v(){i&&clearTimeout(i);f&&clearTimeout(f);u&&clearTimeout(u);r&&clearTimeout(r);i=f=u=r=null;t={}}function h(t){function u(n){return/m/.test(n)?parseFloat(n):/s/.test(n)?parseFloat(n)*100:void 0}var i,r;"transition"in document.body.style?i="transition-duration":"-webkit-transition"in document.body.style&&(i="-webkit-transition-duration");r=u(n("article").eq(0).css(i));setTimeout(function(){n(t).trigger({type:"navigationend"})},r)}var r;n.extend({UuidBit:1,Uuid:function(){return this.UuidBit++,Date.now().toString(36)+this.UuidBit},concat:function(n){return n instanceof Array?n.join(""):[].slice.apply(arguments).join("")},forEach:function(n,t,i){function o(n){var t=n.length,i=typeof n;return i==="function"||n===window?!1:n.nodeType===1&&t?!0:i==="array"||t===0||typeof t=="number"&&t>0&&t-1 in n}var u,r=0,f=n.length,e=o(n);if(i){if(e){for(;r<f;r++)if(u=t.apply(n[r],i),u===!1)break}else for(r in n)if(u=t.apply(n[r],i),u===!1)break}else if(e){for(;r<f;r++)if(u=t.call(n[r],n[r],r),u===!1)break}else for(r in n)if(u=t.call(n[r],n[r],r),u===!1)break}});n.fn.extend({forEach:function(t,i){var r=this;return n.forEach(r,t,i)},iz:function(t){if(window.jQuery){var i=n();return this.forEach(function(r){n(r).is(t)&&i.push(r)}),i}if(window.$chocolatechipjs)return this.is(t)},unique:function(){var n=[],t=this.sort();return t.forEach(function(t){n.indexOf(t)===-1&&n.push(t)}),n.length?n:[]},iznt:function(n){return window.jQuery?this.not(n):window.$chocolatechipjs?this.isnt(n):void 0},haz:function(n){return this.has(n)},haznt:function(t){if(window.jQuery){var i=n();return this.forEach(function(r){n(r).has(t)[0]||i.push(r)}),i}if(window.$chocolatechipjs)return this.hasnt(t)},hazClass:function(t){if(window.jQuery){var i=n();return this.forEach(function(r){n(r).hasClass(t)&&i.push(r)}),i}if(window.$chocolatechipjs)return this.hasClass(t)},hazntClass:function(t){var i;return window.jQuery?(i=n(),this.forEach(function(r){n(r).hasClass(t)||i.push(r)}),i):window.$chocolatechipjs?(i=[],this.forEach(function(n){n.classList.contains(t)&&i.push(n)}),i):void 0},hazAttr:function(t){var i;return window.jQuery?(i=n(),this.forEach(function(r){n(r).attr(t)&&i.push(r)}),i):window.$chocolatechipjs?i=[]:void 0},hazntAttr:function(t){var i;return window.jQuery?(i=n(),this.forEach(function(r){n(r).attr(t)||i.push(r)}),i):window.$chocolatechipjs?(i=[],ctx.hasAttribute(t)||i.push(ctx),i):void 0}});n.extend({eventStart:null,eventEnd:null,eventMove:null,eventCancel:null,gestureLength:30});n(function(){window.navigator.pointerEnabled?(n.eventStart="pointerdown",n.eventEnd="pointerup",n.eventMove="pointermove",n.eventCancel="pointercancel"):window.navigator.msPointerEnabled?(n.eventStart="MSPointerDown",n.eventEnd="MSPointerUp",n.eventMove="MSPointerMove",n.eventCancel="MSPointerCancel"):"ontouchstart"in window?(n.eventStart="touchstart",n.eventEnd="touchend",n.eventMove="touchmove",n.eventCancel="touchcancel"):(n.eventStart="mousedown",n.eventEnd="click",n.eventMove="mousemove",n.eventCancel="mouseout")});n.extend({isiPhone:/iphone/img.test(navigator.userAgent),isiPad:/ipad/img.test(navigator.userAgent),isiPod:/ipod/img.test(navigator.userAgent),isiOS:/ip(hone|od|ad)/img.test(navigator.userAgent),isAndroid:/android/img.test(navigator.userAgent)&&!/trident/img.test(navigator.userAgent),isWebOS:/webos/img.test(navigator.userAgent),isBlackberry:/blackberry/img.test(navigator.userAgent),isTouchEnabled:"createTouch"in document,isOnline:navigator.onLine,isStandalone:navigator.standalone,isiOS6:navigator.userAgent.match(/OS 6/i),isiOS7:navigator.userAgent.match(/OS 7/i),isWin:/trident/img.test(navigator.userAgent),isWinPhone:/trident/img.test(navigator.userAgent)&&/mobile/img.test(navigator.userAgent),isIE10:navigator.userAgent.match(/msie 10/i),isIE11:navigator.userAgent.match(/windows nt/i)&&navigator.userAgent.match(/trident/i),isIEEdge:navigator.userAgent.match(/windows nt/i)&&navigator.userAgent.match(/edge/i),isWebkit:navigator.userAgent.match(/webkit/),isMobile:/mobile/img.test(navigator.userAgent),isDesktop:!/mobile/img.test(navigator.userAgent),isSafari:!/Chrome/img.test(navigator.userAgent)&&/Safari/img.test(navigator.userAgent)&&!/android/img.test(navigator.userAgent),isChrome:/Chrome/img.test(navigator.userAgent),isNativeAndroid:/android/i.test(navigator.userAgent)&&/webkit/i.test(navigator.userAgent)&&!/chrome/i.test(navigator.userAgent),isWideScreen:window.innerWidth>=960&&(window.orientation===90||window.orentation===-90),isWideScreenPortrait:window.innerWidth>=960&&(window.orientation!==90||window.orientation!==-90)});n.extend({browserVersion:function(){var r=navigator.appName,t=navigator.userAgent,i,n=t.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);return n&&(i=t.match(/version\/([\.\d]+)/i))!==null&&(n[2]=i[1]),n=n?[n[1],n[2]]:[r,navigator.appVersion,"-?"],n[1]}});n(function(){n.body=n("body");/android/img.test(navigator.userAgent)&&/webkit/img.test(navigator.userAgent)&&!/Chrome/img.test(navigator.userAgent)&&n.body.addClass("isNativeAndroidBrowser");n.isWin?n.body.addClass("isWindows"):n.isiOS?n.body.addClass("isiOS"):n.isAndroid&&n.body.addClass("isAndroid");n.isSafari&&parseInt(n.browserVersion(),10)===6&&n.body.addClass("isSafari6");n.isNativeAndroid&&n.body.addClass("isNativeAndroidBrowser")});var t={},i,u,f,l=750,e=150;n.isAndroid&&(e=200);n(function(){var y,w,h=n(document.body),p=!1;h.on(n.eventStart,function(u){if(y=Date.now(),w=y-(t.last||y),u.originalEvent&&(u=u.originalEvent),window.navigator.msPointerEnabled||window.navigator.pointerEnabled){if(window&&window.jQuery&&n===window.jQuery){if(u.originalEvent&&!u.originalEvent.isPrimary)return}else if(!u.isPrimary)return;u=u.originalEvent?u.originalEvent:u;h.on("MSHoldVisual",function(n){n.preventDefault()});t.el=n(o(u.target));i&&clearTimeout(i);t.x1=u.pageX;t.y1=u.pageY;p=!1}else n.eventStart==="mousedown"?(t.el=n(o(u.target)),i&&clearTimeout(i),t.x1=u.pageX,t.y1=u.pageY,p=!1):u.touches.length===1&&(t.el=n(o(u.touches[0].target)),i&&clearTimeout(i),t.x1=u.touches[0].pageX,t.y1=u.touches[0].pageY,p=u.targetTouches.length===2?!0:!1);w>0&&w<=250&&(t.isDoubleTap=!0);t.last=y;r=setTimeout(a,l)});h.on(n.eventMove,function(r){if(r.originalEvent&&(r=r.originalEvent),window.navigator.msPointerEnabled){if(window&&window.jQuery&&n===window.jQuery){if(r.originalEvent&&!r.originalEvent.isPrimary)return}else if(!r.isPrimary)return;r=r.originalEvent?r.originalEvent:r;s();t.x2=r.pageX;t.y2=r.pageY}else s(),n.eventMove==="mousemove"?(t.x2=r.pageX,t.y2=r.pageY):r.touches.length===1&&(t.x2=r.touches[0].pageX,t.y2=r.touches[0].pageY);if(n.isAndroid){if(n.gestureLength=50,!t.el)return;t.x2&&Math.abs(t.x1-t.x2)>n.gestureLength||t.y2&&Math.abs(t.y1-t.y2)>n.gestureLength?u=setTimeout(function(){r.preventDefault();t&&t.el&&(t.el.trigger("swipe"),t.el.trigger("swipe"+c(t.x1,t.x2,t.y1,t.y2)),t={})},0):"last"in t&&(f=setTimeout(function(){t&&t.el&&t.el.trigger("tap");t&&t.isDoubleTap?t&&t.el&&(t.el.trigger("doubletap"),t={}):i=setTimeout(function(){return i=null,t&&t.el?(t.el.trigger("singletap"),t={},!1):void 0},e)},0))}});h.on(n.eventEnd,function(r){if(window.navigator.msPointerEnabled)if(window&&window.jQuery&&n===window.jQuery){if(r.originalEvent&&!r.originalEvent.isPrimary)return}else if(!r.isPrimary)return;(s(),t.el)&&(t.x2&&Math.abs(t.x1-t.x2)>n.gestureLength||t.y2&&Math.abs(t.y1-t.y2)>n.gestureLength?u=setTimeout(function(){t&&t.el&&(t.el.trigger("swipe"),t.el.trigger("swipe"+c(t.x1,t.x2,t.y1,t.y2)),t={})},0):"last"in t&&(f=setTimeout(function(){t&&t.el&&t.el.trigger("tap");t&&t.isDoubleTap?t&&t.el&&(t.el.trigger("doubletap"),t={}):i=setTimeout(function(){return i=null,t&&t.el?(t.el.trigger("singletap"),t={},!1):void 0},e)},0)))});h.on("touchcancel",v)});["swipe","swipeleft","swiperight","swipeup","swipedown","doubletap","tap","singletap","longtap"].forEach(function(t){n.fn.extend({method:function(n){return this.on(t,n)}})});n.extend({UIDesktopCompat:function(){n.isDesktop&&n.isSafari?n("body").addClass("isiOS").addClass("isDesktopSafari isDesktop"):n.isDesktop&&n.isChrome&&n("body").addClass("isAndroid").addClass("isDesktopChrome isDesktop")}});n(function(){n.UIDesktopCompat()});n(function(){n.body=n("body");n.body[0].classList.contains("splitlayout")||n("body").prepend("<nav id='global-nav'><\/nav>");n.body[0].classList.contains("splitlayout")&&window.innerWidth<768&&n("meta[name=viewport]").attr("content","width=device-width, initial-scale=0.45, maximum-scale=2, user-scalable=yes");n("h1").each(function(n,t){t.nextElementSibling&&t.nextElementSibling.nodeName==="A"&&t.classList.add("buttonOnRight")});n(".toolbar").prev("article").addClass("has-toolbar");n.isiOS&&n.isStandalone&&n.body[0].classList.add("isStandalone")});n.extend({UIHideNavBar:function(){n("nav").hide();n.body.addClass("hide-navbars")},UIShowNavBar:function(){n("nav").show();n.body.removeClass("hide-navbars")}});n.extend({subscriptions:{},subscribe:function(t,i){n.subscriptions[t]||(n.subscriptions[t]=[]);var r=n.Uuid();return n.subscriptions[t].push({token:r,callback:i}),r},unsubscribe:function(t){setTimeout(function(){var i,r,u;for(i in n.subscriptions)if(n.subscriptions[i])for(r=0,u=n.subscriptions[i].length;r<u;r++)if(n.subscriptions[i][r].token===t)return n.subscriptions[i].splice(r,1),t;return!1})},publish:function(t,i){return n.subscriptions[t]?(setTimeout(function(){for(var r=n.subscriptions[t]?n.subscriptions[t].length:0;r--;)n.subscriptions[t][r].callback(t,i);return!0}),!0):!1}});n.extend({UITrackHashNavigation:function(t,i){t=t||!0;n.UISetHashOnUrl(n.UINavigationHistory[n.UINavigationHistory.length-1],i)},UISetHashOnUrl:function(t,i){i=i||"#/";var r;r=/^#/.test(t)?i+t.split("#")[1]:i+t;n.isAndroid?(/#/.test(t)&&(t=t.split("#")[1]),/\//.test(t)&&(t=t.split("/")[1]),window.location.hash="#/"+t):window.history.replaceState("Object","Title",r)},UIGoBackToArticle:function(t){var o=n.UINavigationHistory.indexOf(t),r=n("article.current"),i=n(t),f,e,u;n.UINavigationHistory.length===0&&(i=n("article:first-of-type"),n.UINavigationHistory.push("#"+i[0].id));u=n.UINavigationHistory.length>1?n.UINavigationHistory.splice(o+1):n("article.previous");n.publish("chui/navigateBack/leave",r[0].id);n.publish("chui/navigateBack/enter",i[0].id);r[0].scrollTop=0;i[0].scrollTop=0;u.length&&n.forEach(u,function(t){n(t).removeClass("previous").addClass("next");n(t).prev().removeClass("previous").addClass("next")});f=r.next().hazClass("toolbar");e=i.next().hazClass("toolbar");i.removeClass("previous next").addClass("current");i.prev().removeClass("previous next").addClass("current");e.removeClass("previous next").addClass("current");r.removeClass("current").addClass("next");r.prev().removeClass("current").addClass("next");f.removeClass("current").addClass("next");n(".toolbar.previous").removeClass("previous").addClass("next");n.UISetHashOnUrl(n.UINavigationHistory[n.UINavigationHistory.length-1]);h(i)},UIGoBack:function(){var r=n.UINavigationHistory.length,i=n("article.current"),t=n(n.UINavigationHistory[r-2]),u,f;(r===0&&(t=n("article:first-of-type"),n.UINavigationHistory.push("#"+t[0].id)),n.publish("chui/navigateBack/leave",i[0].id),n.publish("chui/navigateBack/enter",t[0].id),i[0].scrollTop=0,t[0].scrollTop=0,u=i.next().hazClass("toolbar"),f=t.next().hazClass("toolbar"),t.removeClass("previous").addClass("current"),t.prev().removeClass("previous").addClass("current"),f.removeClass("previous").addClass("current"),i.removeClass("current").addClass("next"),i.prev().removeClass("current").addClass("next"),u.removeClass("current").addClass("next"),n.UISetHashOnUrl(n.UINavigationHistory[r-2]),n.UINavigationHistory.length!==1)&&(n.UINavigationHistory.pop(),h(t))},isNavigating:!1,UIGoToArticle:function(t){var i,u;if(!n.isNavigating){n.isNavigating=!0;i=n("article.current");u=i.prev();t=n(t);var o="#"+t[0].id,s=t.prev(),f,e,r="next previous";n.publish("chui/navigate/leave",i[0].id);n.UINavigationHistory.push(o);n.publish("chui/navigate/enter",t[0].id);i[0].scrollTop=0;t[0].scrollTop=0;f=i.next().hazClass("toolbar");e=t.next().hazClass("toolbar");i.removeClass("current").addClass("previous");u.removeClass("current").addClass("previous");f.removeClass("current").addClass("previous");t.removeClass(r).addClass("current");s.removeClass(r).addClass("current");e.removeClass(r).addClass("current");n.UISetHashOnUrl(t[0].id);setTimeout(function(){n.isNavigating=!1},500);h(t)}}});n(function(){n.extend({UINavigationHistory:["#"+n("article").eq(0).attr("id")]});n("nav:not(#global-nav)").forEach(function(t,i){n("body")[0].classList.contains("splitlayout")||(i===0?t.classList.add("current"):t.classList.add("next"))});n("article").forEach(function(t,i){n("body")[0].classList.contains("splitlayout")||n("body")[0].classList.contains("slide-out-app")||(i===0?t.classList.add("current"):t.classList.add("next"))});n("body").on("singletap",".back",function(){this.classList.contains("back")&&n.UIGoBack()});n("body").on("singletap doubletap","li",function(){var r=n(this),t,i;n.isNavigating||this.hasAttribute("data-goto")&&this.getAttribute("data-goto")&&document.getElementById(this.getAttribute("data-goto"))&&(n(this).parent()[0].classList.contains("deletable")||(r.addClass("selected"),t="#"+this.getAttribute("data-goto"),n(t).addClass("navigable"),setTimeout(function(){r.removeClass("selected")},1e3),i=n(t),n.isAndroid||n.isChrome?setTimeout(function(){n.UIGoToArticle(i)},200):n.UIGoToArticle(i)))});n("li[data-goto]").forEach(function(t){n(t).closest("article").addClass("navigable");var i="#"+t.getAttribute("data-goto");n(i).addClass("navigable")});n("article").eq(1)[0]&&n.UISetHashOnUrl(n("article").eq(0)[0].id);n("nav").on(n.eventStart,function(n){n.preventDefault()})});n(function(){n("body").on("singletap","button",function(){var t=n(this);t.parent(".segmented")[0]||t.parent(".tabbar")[0]||this.classList.contains("slide-out-button")||this.classList.contains("back")||this.classList.contains("backTo")||(t.addClass("selected"),setTimeout(function(){t.removeClass("selected")},1e3))})});n.fn.extend({UIBlock:function(t){return t=t?" style='opacity:"+t+"'":" style='opacity: .5;'",n(this).before("<div class='mask'"+t+"><\/div>"),n("article.current").attr("aria-hidden",!0),this},UIUnblock:function(){return n(".mask").remove(),n("article.current").removeAttr("aria-hidden"),this}});n.fn.extend({UICenter:function(t){var t=t,i,r,u,f,o,s,h,e;this[0]&&(i=n(this),r=i.parent(),t?n(this.css("position",t)):t=i.css("position")==="absolute"?"absolute":"relative",t==="absolute"?(u=i[0].clientHeight,f=i[0].clientWidth,o=r[0].clientHeight,s=r[0].clientWidth):(u=parseInt(i.css("height"),10),f=parseInt(i.css("width"),10),o=parseInt(r.css("height"),10),s=parseInt(r.css("width"),10),n(this).css({"margin-left":"auto","margin-right":"auto"})),r[0].nodeName==="body"?(h=window.innerHeight/2+window.pageYOffset-u/2+"px",e=window.innerWidth/2-f/2+"px"):(h=o/2-u/2+"px",e=s/2-f/2+"px"),t!=="absolute"&&(e=0),i.css({left:e,top:h}))}});n.fn.extend({UIBusy:function(t){var i;t=t||{};i={size:43,color:"#000",position:!1,duration:"2s"};n.extend(i,t);var u=this,r,f=function(){var t={"-webkit-animation-duration":i.duration};return r=n('<span class="busy"><\/span>'),n(r).css({"background-color":i.color,height:i.size+"px",width:i.size+"px"}),n(r).css(t),n(r).attr("role","progressbar"),i.position&&n(r).addClass(i.position),u.append(r),this},e=function(){i.id=n.Uuid();var r=null,f=i.position?" "+i.position:"";if(n.isNativeAndroid){r='<svg class="busy'+f+'" version="1.1" id="'+i.id+'" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><g><path fill="none" stroke="'+i.color+'" stroke-width="10" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M74.2,65c2.7-4.4,4.3-9.5,4.3-15c0-15.7-12.8-28.5-28.5-28.5S21.5,34.3,21.5,50c0,5.5,1.6,10.6,4.3,15"/><\/g><polyline fill="none" stroke="'+i.color+'" stroke-width="10" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="89.4,56.1 74.3,65 65.4,49.9 "/><\/svg>';u.append(r);return}return r='<svg id="'+i.id+'" class="busy'+f+'" x="0px" y="0px" viewBox="0 0 100 100"><circle stroke="url(#SVGID_1_)" cx="50" cy="50" r="28.5"/><\/svg>',u.append(r),u.addClass("hasActivityIndicator"),i.position&&n("#"+i.id).addClass(i.position),t.color&&n("#"+i.id).find("circle").css("stroke",t.color),n("#"+i.id).css({height:i.size+"px",width:i.size+"px"}),n("#"+i.id)},o=function(){return r=n('<progress class="busy"><\/progress>'),n(r).css({color:i.color}),n(r).attr("role","progressbar"),n(r).addClass("win-ring"),i.position&&n(r).addClass(i.position),u.append(r),this};n.isWin?o(t):n.isAndroid||n.isChrome?e(t):(n.isiOS||n.isSafari)&&f(t)}});n.extend({UIPopup:function(t){var i,o;if(t){i={};i.id=n.Uuid();i.content=!0;n.extend(i,t);var u=i.id,s=i.title?"<header><h1>"+i.title+"<\/h1><\/header>":"",h=i.message?'<p role="note">'+t.message+"<\/p>":"",c=t.cancelButton?'<button class="cancel" role="button">'+i.cancelButton+"<\/button>":"",f=i.continueButton?'<button class="continue" role="button">'+i.continueButton+"<\/button>":"",r=i.callback||n.noop,l,e;if(e=i.empty?n.concat('<div class="popup closed" role="alertdialog" id="',u,'"><div class="panel"><\/div><\/div>'):n.concat('<div class="popup closed','" role="alertdialog" id="',u,'"><div class="panel">',s,h,"<\/div><footer>",c,f,"<\/footer>",l,"<\/div>"),n("body").append(e),r&&f)n(".popup").find(".continue").on(n.eventStart,function(){var t=n(this);n.isAndroid||n.isChrome?(t.addClass("selected"),setTimeout(function(){t.removeClass("selected");n(".popup").UIPopupClose();r.call(r)},300)):(n(".popup").UIPopupClose(),r.call(r))});n.UICenterPopup();setTimeout(function(){n("body").find(".popup").addClass("opened");n("body").find(".popup").removeClass("closed")},200);n("body").find(".popup").UIBlock("0.5");o=n.eventStart+" singletap "+n.eventEnd;n(".mask").on(o,function(n){n.stopPropagation()})}},UICenterPopup:function(){var t=n(".popup"),i,r;t[0]&&(i=window.innerHeight/2+window.pageYOffset-t[0].clientHeight/2+"px",r=window.innerWidth===320?"10px":Math.floor((window.innerWidth-318)/2)+"px",n.isWin?t.css({top:i}):t.css({left:r,top:i}))}});n.fn.extend({UIPopupClose:function(){(this||this.classList.contains("popup"))&&(n(this).UIUnblock(),n(this).remove())}});n(function(){n("body").on(n.eventStart,".cancel",function(){var t=n(this);t.closest(".popup")[0]&&(n.isAndroid||n.isChrome?(t.addClass("selected"),setTimeout(function(){t.closest(".popup").UIPopupClose();t.removeClass("selected")},300)):t.closest(".popup").UIPopupClose())});n(window).on("resize",function(){n.UICenterPopup()})});n.extend({UIPopover:function(t){var i;t=t||{};i={id:n.Uuid(),callback:n.noop,title:""};n.extend(i,t);i.content=t&&t.content?t.content:"";var u="<header><h1>"+i.title+"<\/h1><\/header>",f='<div class="popover" id="'+i.id+'">'+u+"<section><\/section><\/div>",r="#"+i.id,e=function(t){var u=n(t).offset(),e=u.left,o,f,i=n(r),s=i.offset();o=s.left;f=u.top+n(t)[0].clientHeight;i.width()+u.left>window.innerWidth?i.css({left:window.innerWidth-i.width()-20+"px",top:f-30+"px"}):i.css({left:e+"px",top:f-30+"px"})};if(n(".mask")[0]){n.UIPopoverClose();n("body").UIUnblock();return}n("body").append(f);(n.isAndroid||n.isChrome)&&setTimeout(function(){n(r).addClass("opened")},50);n.isWin&&n(r).addClass("open");n(r).data("triggerEl",i.trigger);n(r).find("section").append(i.content);i.callback.call(i.callback,i.trigger);e(i.trigger);n(".popover").UIBlock(".5")}});n.extend({UIAlignPopover:function(){var t=n(".popover");if(t.length){var r=t.data("triggerEl"),i=n(r).offset(),u=i.left;n(t).width()+i.left>window.innerWidth?t.css({left:window.innerWidth-n(t).width()-20+"px"}):t.css({left:u+"px"})}}});n.extend({UIPopoverClose:function(){n("body").UIUnblock();n(".popover").css("visibility","hidden");setTimeout(function(){n(".popover").remove()},10)}});n(function(){n(window).on("resize",function(){n.UIAlignPopover()});var t=n.eventStart+" singletap "+n.eventEnd;n("body").on(t,".mask",function(t){if(n(".popover")[0])n.UIPopoverClose();else{if(t&&t.nodeType===1)return;t.stopPropogation()}})});n.fn.extend({UISegmented:function(t){if(!n(this).hazClass("paging").length){var i=t&&t.callback?t.callback:n.noop,r=t&&t.selected>0?t.selected:0;this.find("button").forEach(function(t,i){n(t).attr("role","radio");n(t).addClass("segment");i===r&&(t.setAttribute("aria-checked","true"),t.classList.add("selected"))});this.on("singletap","button",function(t){var r=n(this);this.parentNode.classList.contains("paging")||(r.siblings("button").removeClass("selected"),r.siblings("button").removeAttr("aria-checked"),r.addClass("selected"),r.attr("aria-checked",!0),i.call(this,t))})}}});n.extend({UICreateSegmented:function(t){var r,f=t&&t.id?t.id:n.Uuid(),u=t&&t.className?t.className:"",e=t&&t.labels?t.labels:[],o=t&&t.selected?t.selected:0,i=['<div class="segmented'];return u&&i.push(" "+u),i.push('">'),e.forEach(function(n){i.push('<button role="radio" class="segment"');i.push('"');i.push(">");i.push(n);i.push("<\/button>")}),i.push("<\/div>"),r=n(i.join("")),r.attr("id",f),r}});n.fn.extend({UIPanelToggle:function(t,i){var r,u=0;u=this.children().hazClass("selected").index()||0;t instanceof Array?r=t.children("div"):typeof t=="string"&&(r=n(t).children("div"));r.eq(u).siblings().css({display:"none"});i&&i.apply(this,arguments);this.on(n.eventEnd,"button",function(){r.eq(n(this).index()).css({display:"block"}).siblings().css("display","none")});this.on("singletap","button",function(){var t=n(this);this.parentNode.classList.contains("paging")||(t.siblings("button").removeClass("selected"),t.siblings("button").removeAttr("aria-checked"),t.addClass("selected"),t.attr("aria-checked",!0))})}});n.extend({UIPaging:function(){var t=n(".segmented.paging").closest("nav").next();n(".segmented.paging").hazClass("horizontal").length?t.addClass("horizontal"):n(".segmented.paging").hazClass("vertical").length&&t.addClass("vertical");t.children().eq(0).addClass("current");t.children().eq(0).siblings().addClass("next");var i=function(){return t.children().length},r=function(r){if(i()!==1){r.next().removeClass("selected");r.addClass("selected");var u;u=n("section.current");u.index()===0?(u.removeClass("current"),t.children().eq(i()-1).addClass("current").removeClass("next"),t.children().eq(i()-1).siblings().removeClass("next").addClass("previous")):(u.removeClass("current").addClass("next"),u.prev().removeClass("previous").addClass("current"));setTimeout(function(){r.removeClass("selected")},250)}},u=function(r){if(i()!==1){r.prev().removeClass("selected");r.addClass("selected");var u;r[0].classList.contains("disabled")||(u=n("section.current"),u.index()===i()-1?(u.removeClass("current"),t.children().eq(0).addClass("current").removeClass("previous"),t.children().eq(0).siblings().removeClass("previous").addClass("next")):(u.removeClass("current").addClass("previous"),u.next().removeClass("next").addClass("current")),setTimeout(function(){r.removeClass("selected")},250))}};n(".segmented.paging").on(n.eventStart,"button:first-of-type",function(){r(n(this))});n(".segmented.paging").on(n.eventStart,"button:last-of-type",function(){u(n(this))});if(n("article.paging.horizontal")[0]){n("article.paging").on("swiperight",function(){r(n("button:first-of-type"))});n("article.paging").on("swipeleft",function(){u(n("button:last-of-type"))})}if(n("article.paging.vertical")[0]){n("article.paging").on("swipeup",function(){r(n("button:first-of-type"))});n("article.paging").on("swipeudown",function(){u(n("button:last-of-type"))})}}});n.fn.extend({UIEditList:function(t){var i={editLabel:"Edit",doneLabel:"Done",deleteLabel:"Delete",callback:n.noop,deletable:!0,movable:!0},b,a,v,u,y;if(t&&(n.extend(i,t),i.deletable||i.movable)){var p=n.isiOS||n.isSafari?p:"transform",w=i.editLabel,k=i.doneLabel,f=i.deleteLabel,d=i.placement,g=i.callback,e,o,s,h,c="swiperight",l="swipeleft",a,v,r=n("html").attr("dir");return r=r?r.toLowerCase():"",r==="rtl"&&(c="swipeleft",l="swiperight"),n.isWin&&(f=""),b=n("li").eq(0)[0].clientHeight,i.deletable&&(e=n.concat('<button class="delete"><label>',f,"<\/label><\/button"),s='<span class="deletion-indicator"><\/span>',n(this).addClass("deletable")),i.movable&&(a="<span class='move-up'><\/span>",v="<span class='move-down'><\/span>",n(this).addClass("editable")),o=n.concat('<button class="edit">',w,"<\/button"),n(this).closest("article").prev().find(".edit")[0]||n(this).closest("article").prev().find(".done")[0]||n(this).closest("article").prev().append(o),h=n(this).closest("article").prev().find(".edit"),n(this).find("li").forEach(function(t){n(t).has(".deletion-indicator").length||(i.deletable&&n(t).prepend(s),i.movable&&(n(t).append(a),n(t).append(v)),i.deletable&&n(t).append(e))}),u=[],n(this).find("li").forEach(function(t,i){i===0?n(t).attr("data-list-position","0"):n(t).attr("data-list-position",i);u.push(i)}),n(this).attr("data-list-items-position",u.join(",")),y=function(t,r,u){n(function(){u.on("singletap",function(){var u=this,f;this.classList.contains("edit")?setTimeout(function(){u.classList.remove("edit");u.classList.add("done");n(u).text(i.doneLabel);n(r).addClass("showIndicators")}):this.classList.contains("done")&&(n(r).data("list-edit")&&t.call(t,r),setTimeout(function(){u.classList.remove("done");u.classList.add("edit");n(u).text(i.editLabel);n(r).removeClass("showIndicators");n(r).find("li").removeClass("selected")}),f=[],n(r).find("li").forEach(function(t){f.push(n(t).attr("data-list-position"))}),n(r).attr("data-list-items-position",f.join(",")))});n(r).off("singletap",".deletion-indicator");n(r).on("singletap",".deletion-indicator",function(){if(n(this).parent("li").hazClass("selected").length){n(this).parent("li").removeClass("selected");return}n(this).parent("li").addClass("selected")});n(r).on(c,"li",function(){i.deletable&&n(this).removeClass("selected")});n(r).on(l,"li",function(){i.deletable&&n(this).addClass("selected")});n(r).on("singletap",".move-up",function(){var t=n(this).closest("li");if((!window.$chocolatechipjs||!t.is("li:first-child")[0])&&(!window.jQuery||!t.is("li:first-child"))){n(r).data("list-edit",!0);var t=n(this).closest("li"),i=t.prev(),f=t.clone(),e=i.clone(),u=t[0].offsetHeight;t.css({"-webkit-transform":"translate3d(0,-"+u+"px,0)",transform:"translate3d(0,-"+u+"px,0)"});i.css({"-webkit-transform":"translate3d(0,"+u+"px,0)",transform:"translate3d(0,"+u+"px,0)"});setTimeout(function(){window.$chocolatechipjs?(n.replace(e,t),n.replace(f,i)):(t.replaceWith(e),i.replaceWith(f))},250)}});n(r).on("singletap",".move-down",function(){var t=n(this).closest("li"),u=t.next(),f=t.clone(),e=u.clone(),i;window.$chocolatechipjs&&t.is("li:last-child")[0]||window.jQuery&&t.is("li:last-child")||(n(r).data("list-edit",!0),i=t[0].offsetHeight,t.css({"-webkit-transform":"translate3d(0,"+i+"px,0)",transform:"translate3d(0,"+i+"px,0)"}),u.css({"-webkit-transform":"translate3d(0,-"+i+"px,0)",transform:"translate3d(0,-"+i+"px,0)"}),setTimeout(function(){window.$chocolatechipjs?(n.replace(e,t),n.replace(f,u)):(t.replaceWith(e),u.replaceWith(f))},250))});n(r).on("singletap",".delete",function(){var u=this,i,t;n(r).data("list-edit",!0);i="-1200%";n("html").attr("dir")==="rtl"&&(i="1000%");n(this).siblings().css({"-webkit-transform":"translate3d("+i+",0,0)","-webkit-transition":"all 1s ease-out",transform:"translate3d("+i+",0,0)",transition:"all 1s ease-out"});t=n(r).attr("data-list-items-deleted");t===undefined?t=[n(this).closest("li").attr("data-list-position")]:(t=t.split(","),t.push(n(this).closest("li").attr("data-list-position")));n(r).attr("data-list-items-deleted",t.sort().join(","));setTimeout(function(){n(u).parent().remove()},500)})})},y(i.callback,n(this),h)}}});n.fn.extend({UISelectList:function(t){var r=t&&t.name?t.name:n.Uuid(),i=this[0];i.classList.add("select");n(i).find("li").forEach(function(i,u){var f=i.getAttribute("data-select-value")!==null?i.getAttribute("data-select-value"):"";i.setAttribute("role","radio");n(i).removeClass("selected").find("input").removeAttr("checked");t&&t.selected===u?(i.setAttribute("aria-checked","true"),i.classList.add("selected"),n(i).find("input")[0]?n(i).find("input").prop("checked",!0).attr("value",f):n(i).append('<input type="radio" checked="checked" name="'+r+'" value="'+f+'">')):n(i).find("input")[0]||n(i).append('<input type="radio" name="'+r+'" value="'+f+'">')});n(i).on("singletap","li",function(){var i=this;n(i).siblings("li").removeClass("selected");n(i).siblings("li").removeAttr("aria-checked");n(i).siblings("li").find("input").removeAttr("checked");n(i).addClass("selected");i.setAttribute("aria-checked",!0);n(i).find("input").prop("checked",!0);t&&t.callback&&t.callback.apply(this,arguments)})}});n.extend({UISheet:function(t){var t,i,r;t||(t={});t.background&&(t.background=n.concat(' style="background-color:',t.background,'" '));t.handle===!1&&(t.handle="");i={};i.id=n.Uuid();i.listClass="";i.background="";i.handle='<div class="handle"><span><\/span><\/div>';t&&n.extend(i,t);r=n.concat('<div id="',i.id,'" class="sheet',i.listClass,'"',i.background,">",i.handle,'<section class="scroller-vertical"><\/section><\/div>');n("body").append(r);n(".sheet .handle").on(n.eventStart,function(){var t=n(this);n.isAndroid||n.isChrome?(t.addClass("selected"),setTimeout(function(){t.removeClass("selected");n.UIHideSheet()},500)):n.UIHideSheet()})},UIShowSheet:function(t){var i=t?t:".sheet";n("article.current").addClass("blurred");n.isAndroid||n.isChrome?(n(i).css("display","block"),setTimeout(function(){n(i).addClass("opened")},20)):n(i).addClass("opened")},UIHideSheet:function(){n(".sheet").removeClass("opened");n("article.current").addClass("removeBlurSlow");setTimeout(function(){n("article").removeClass("blurred");n("article").removeClass("removeBlurSlow")},500)}});n.extend({UISlideout:function(t){var e,r,i=n.noop,u,f;e=t&&t.position?t.position:"left";r=t&&t.dynamic?t.dynamic:!1;t&&t.callback&&(i=t.callback);u=n("<button class='slide-out-button'><\/button>");f='<div class="slide-out"><section><\/section><\/div>';n("article").removeClass("next");n("article").removeClass("current");n("article").prev().removeClass("next");n("article").prev().removeClass("current");n("body").append(f);n("body").addClass("slide-out-app");n("article:first-of-type").addClass("show");n("article:first-of-type").prev().addClass("show");n("#global-nav").append(u);n(".slide-out-button").on(n.eventStart,function(){n(".slide-out").toggleClass("open");n(this).toggleClass("focused")});if(r)n(".slide-out").on("singletap","li",function(){n.isAndroid||n.isChrome?setTimeout(function(){i(this);n(".slide-out-button").removeClass("focused")},400):(i(this),n(".slide-out-button").removeClass("focused"))});else n(".slide-out").on("singletap","li",function(){var i=n(this),t;i.addClass("selected");setTimeout(function(){i.removeClass("selected")},500);t="#"+n(this).attr("data-show-article");n.UINavigationHistory[0]=t;n.UISetHashOnUrl(t);n.publish("chui/navigate/leave",n("article.show")[0].id);n.publish("chui/navigate/enter",t);n.isAndroid||n.isChrome?setTimeout(function(){n(".slide-out").removeClass("open");n("article").removeClass("show");n("article").prev().removeClass("show");n(t).addClass("show");n(t).prev().addClass("show");n(".slide-out-button").removeClass("focused")},400):(n(".slide-out").removeClass("open"),n("article").removeClass("show"),n("article").prev().removeClass("show"),n(t).addClass("show"),n(t).prev().addClass("show"),n(".slide-out-button").removeClass("focused"))})}});n.extend(n.UISlideout,{populate:function(t){var i=n(".slide-out"),r;if(i[0])if(n.isArray(t))i.find("section").append('<ul class="list"><\/ul>'),r=i.find("ul"),t.forEach(function(n){for(var t in n)t==="header"?r.append('<li class="slideout-header"><h2>'+n[t]+"<\/h2><\/li>"):r.append('<li data-show-article="'+t+'"><h3>'+n[t]+"<\/h3><\/li>")});else return}});n.fn.extend({UIStepper:function(t){var e,o;if(!t)return[];if(!t.start)return[];if(!t.end)return[];var i=n(this),s=t.start,h=t.end,r=t.defaultValue?t.defaultValue:t.start,u="+",f="-";n.isWin&&(u="",f="");var c='<button class="decrease"><span>'+f+"<\/span><\/button>",l="<label>"+r+'<\/label><input type="text" value="'+r+'">',a='<button class="increase"><span>'+u+"<\/span><\/button>";i.append(c+l+a);i.data("ui-value",{start:s,end:h,defaultValue:r});e=function(){var t=i.find("input").val(),f=i.data("ui-value"),u=f.start,r;t<=u?n(this).addClass("disabled"):(r=Number(t)-1,i.find("button:last-of-type").removeClass("disabled"),i.find("label").text(r),i.find("input")[0].value=r,t===u&&n(this).addClass("disabled"))};o=function(){var t=i.find("input").val(),f=i.data("ui-value"),u=f.end,r;t>=u?n(this).addClass("disabled"):(r=Number(t)+1,i.find("button:first-of-type").removeClass("disabled"),i.find("label").text(r),i.find("input")[0].value=r,t===u&&n(this).addClass("disabled"))};i.find("button:first-of-type").on("singletap",function(){e.call(this,i)});i.find("button:last-of-type").on("singletap",function(){o.call(this,i)})}});n.extend({UIResetStepper:function(n){var t=n.data("ui-value").defaultValue;n.find("label").html(t);n.find("input")[0].value=t}});n.fn.extend({UISwitch:function(){var t=!1,i="swiperight",r="swipeleft";document.documentElement.dir==="rtl"&&(i="swipeleft",r="swiperight");this.forEach(function(u){if(u.setAttribute("role","checkbox"),n(u).data("ui-setup")!==!0){u.querySelector("input")||u.insertAdjacentHTML("afterBegin",'<input type="checkbox">');u.classList.contains("on")&&u.querySelector("input").setAttribute("checked","checked");u.querySelector("em")&&(t=!0);t||u.insertAdjacentHTML("afterBegin","<em><\/em>");n(u).on("singletap",function(){var n=u.querySelector("input");u.classList.contains("on")?(u.classList.remove("on"),u.removeAttribute("aria-checked"),n.removeAttribute("checked")):(u.classList.add("on"),n.setAttribute("checked","checked"),u.setAttribute("aria-checked",!0))});n(u).on(i,function(){var n=u.querySelector("input");u.classList.contains("on")&&(u.classList.remove("on"),u.removeAttribute("aria-checked"),n.removeAttribute("checked"))});n(u).on(r,function(){var n=u.querySelector("input");u.classList.contains("on")||(u.classList.add("on"),n.setAttribute("checked","checked"),u.setAttribute("aria-checked",!0))});n(u).data("ui-setup",!0)}})}});n.extend({UICreateSwitch:function(t){var i={id:n.Uuid(),name:"",value:"",state:"",checked:"",style:""},r;return n.extend(i,t),i.state==="off"&&(i.state=""),r=n.concat('<span class="switch'," ",i.style," ",i.state,'" id="',i.id,'"><em><\/em>','<input type="checkbox"',i.name,i.checked,' value="',i.value,'"><\/span>'),n(r)}});n(function(){n(".switch").UISwitch()});document.addEventListener("touchstart",function(n){for(var t=n.target,i=0,i=0;i<10;i+=1)t!==null&&(t.className!==undefined&&t.className.match("navigable")&&(t.scrollTop===0?t.scrollTop=1:t.scrollTop+t.offsetHeight===t.scrollHeight&&(t.scrollTop=t.scrollTop-1)),t=t.parentNode)});n.extend({UITabbar:function(t){var i,r,f;if(t){i={id:n.Uuid(),selected:0};n.extend(i,t);n("body").addClass("hasTabBar");n.isiOS6&&n("body").addClass("isiOS6");var u='<div class="tabbar" id="'+i.id+'">',e=n.isiOS||n.isSafari?'<span class="icon"><\/span>':"",o=n("article");for(r=0;r<i.tabs;r++)u+='<button class="'+i.icons[r],i.selected===r+1&&(u+=" selected"),u+='">'+e+"<label>"+i.labels[r]+"<\/label><\/button>";u+="<\/div>";n("body").append(u);n("#"+i.id).find("button").forEach(function(t,i){n(t).data("history",["#"+o.eq(i)[0].id])});n("nav").removeClass("current").addClass("next");n("#global-nav").removeClass("next");n("nav").eq(i.selected).removeClass("next").addClass("current");n("article").removeClass("current").addClass("next");n("article").eq(i.selected-1).removeClass("next").addClass("current");f="singletap";n.isAndroid&&(f=n.eventStart);n(".tabbar").on(f,"button",function(){var f=this,r,u,t,e,i;if(n.publish("chui/navigate/leave",n("article.current")[0].id),f.classList.add("selected"),n(f).siblings("button").removeClass("selected"),r=n(this).index(),n("article.previous").removeClass("previous").addClass("next"),n("nav.previous").removeClass("previous").addClass("next"),t=n(this).data("history"),t.length>1)for(n("article.current").removeClass("current").addClass("next"),n("nav.current").removeClass("current").addClass("next"),n(t[t.length-1]).removeClass("next").addClass("current"),n(t[t.length-1]).prev().removeClass("next").addClass("current"),e=t.length-1,i=0;i<e;i++)n(t[i]).removeClass("next").addClass("previous"),n(t[i]).prev().removeClass("next").addClass("previous");else n("article.current").removeClass("current").addClass("next"),n("nav.current").removeClass("current").addClass("next"),n("article").eq(r).removeClass("next").addClass("current"),n("nav").eq(r+1).removeClass("next").addClass("current");u=n("article").eq(r)[0].id;n.publish("chui/navigate/enter",u);n("article").forEach(function(t){window.jQuery?n(t).scrollTop(0):window.$chocolatechipjs&&(t.scrollTop=0)});n.UISetHashOnUrl("#"+u);n.UINavigationHistory=n(this).data("history")})}}});n.extend({templates:{},template:function(n,t){var i;return t=t||"data",i=/\[\[=([\s\S]+?)\]\]/g,new Function(t,"var p=[];p.push('"+n.replace(/[\r\t\n]/g," ").split("'").join("\\'").replace(i,"',$1,'").split("[[").join("');").split("]]").join("p.push('")+"');return p.join('');")}});n.extend({UISearch:function(t){var i=t&&t.articleId||n("article").eq(0),r=t&&t.id||n.Uuid(),f=t&&t.placeholder||"search",e=t&&t.results||1,u='<div class="searchBar"><input placeholder="'+f+'" type="search" results="'+e+'" id="'+r+'"><\/div>';n(i).find("section").prepend(u);n.isWin&&(n(i).prev().append(u),n("#"+r).parent().append('<span class="searchGlyph">&#xe11A;<\/span>'))}});n(function(){var t=function(){function c(n){return t===""?n:(n=n.charAt(0).toUpperCase()+n.substr(1),t+n)}var l=document.createElement("div").style,t=function(){for(var t="t,webkitT".split(","),r=t.length,i,n=0;n<r;n++)if(i=t[n]+"ransform",i in l)return t[n].substr(0,t[n].length-1);return!1}(),r=t?"-"+t.toLowerCase()+"-":"",a=c("transform"),i=c("transitionDuration"),u="ontouchstart"in window;(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)&&(u=!1);var f=n.eventStart,e=n.eventMove,o=n.eventEnd,v=n.eventCancel,s=function(){if(t===!1)return!1;return{"":"transitionend",webkit:"webkitTransitionEnd"}[t]}(),h=function(t){var h,i,a,v,y,u,c,l;if(t){this.carouselContainer=typeof t.target=="string"?document.querySelector(t.target):t.target;this.options={panels:t.panels||3,snapThreshold:null,loop:t.loop||!0};n.isRTL&&(t.loop=!0);for(v in t)this.options[v]=t[v];for(this.carouselContainer.style.overflow="hidden",this.carouselContainer.style.position="relative",this.carouselPanels=[],h=document.createElement("ul"),h.className="carousel-track",h.style.cssText="position:relative;top:0;height:100%;width:100%;"+r+"transition-duration:0;"+r+"transform:translateZ(0);"+r+"transition-timing-function:ease-out",this.carouselContainer.appendChild(h),this.track=h,this.refreshSize(),u=-1;u<2;u++)i=document.createElement("li"),i.id="carousel-panel-"+(u+1),i.style.cssText=r+"transform:translateZ(0);position:absolute;top:0;height:100%;width:100%;left:"+u*100+"%",y=u===-1?this.options.panels-1:u,n(i).data("upcomingPanelIndex",y),this.options.loop||u!==-1||(i.style.visibility="hidden"),this.track.appendChild(i),this.carouselPanels.push(i);if(a=this.carouselPanels[1].className,this.carouselPanels[1].className=a?a+" carousel-panel-active":"carousel-panel-active",this.carouselContainer.addEventListener(f,this,!1),this.carouselContainer.addEventListener(e,this,!1),this.carouselContainer.addEventListener(o,this,!1),this.track.addEventListener(s,this,!1),t.pagination){for(c=document.createElement("ul"),c.className="pagination",l=0;l<this.options.panels;l++)i=document.createElement("li"),l===0&&(i.className="selected"),c.appendChild(i);window.$chocolatechipjs?this.carouselContainer.insertAdjacentElement("afterEnd",c):n(this.carouselContainer).after(c)}}};return h.prototype={currentPanel:1,x:0,panel:0,customEvents:[],onSlide:function(n){this.carouselContainer.addEventListener("carousel-panel-move",n,!1);this.customEvents.push(["move",n])},destroy:function(){while(this.customEvents.length)this.carouselContainer.removeEventListener("carousel-panel-"+this.customEvents[0][0],this.customEvents[0][1],!1),this.customEvents.shift();this.carouselContainer.removeEventListener(f,this,!1);this.carouselContainer.removeEventListener(e,this,!1);this.carouselContainer.removeEventListener(o,this,!1);this.track.removeEventListener(s,this,!1)},refreshSize:function(){this.carouselContainerWidth=this.carouselContainer.clientWidth;this.carouselContainerHeight=this.carouselContainer.clientHeight;this.panelWidth=this.carouselContainerWidth;this.maxX=-this.options.panels*this.panelWidth+this.carouselContainerWidth;this.snapThreshold=this.options.snapThreshold===null?Math.round(this.panelWidth*.15):/%/.test(this.options.snapThreshold)?Math.round(this.panelWidth*this.options.snapThreshold.replace("%","")/100):this.options.snapThreshold},updatePanelCount:function(n){this.options.panels=n;this.maxX=-this.options.panels*this.panelWidth+this.carouselContainerWidth},goToPanel:function(t){this.carouselPanels[this.currentPanel].className=this.carouselPanels[this.currentPanel].className.replace(/(^|\s)carousel-panel-active(\s|$)/,"");t=t<0?0:t>this.options.panels-1?this.options.panels-1:t;console.log("p: ",t);this.panel=t;this.track.style[i]="0s";this.getPosition(-t*this.panelWidth);this.currentPanel=this.panel+1-Math.floor((this.panel+1)/3)*3;this.carouselPanels[this.currentPanel].className=this.carouselPanels[this.currentPanel].className+" carousel-panel-active";this.currentPanel===0?(this.carouselPanels[2].style.left=this.panel*100-100+"%",this.carouselPanels[0].style.left=this.panel*100+"%",this.carouselPanels[1].style.left=this.panel*100+100+"%",n(this.carouselPanels[2]).data("upcomingPanelIndex",this.panel===0?this.options.panels-1:this.panel-1),n(this.carouselPanels[0]).data("upcomingPanelIndex",this.panel),n(this.carouselPanels[1]).data("upcomingPanelIndex",this.panel===this.options.panels-1?0:this.panel+1)):this.currentPanel===1?(this.carouselPanels[0].style.left=this.panel*100-100+"%",this.carouselPanels[1].style.left=this.panel*100+"%",this.carouselPanels[2].style.left=this.panel*100+100+"%",n(this.carouselPanels[0]).data("upcomingPanelIndex",this.panel===0?this.options.panels-1:this.panel-1),n(this.carouselPanels[1]).data("upcomingPanelIndex",this.panel),n(this.carouselPanels[2]).data("upcomingPanelIndex",this.panel===this.options.panels-1?0:this.panel+1)):(this.carouselPanels[1].style.left=this.panel*100-100+"%",this.carouselPanels[2].style.left=this.panel*100+"%",this.carouselPanels[0].style.left=this.panel*100+100+"%",n(this.carouselPanels[1]).data("upcomingPanelIndex",this.panel===0?this.options.panels-1:this.panel-1),n(this.carouselPanels[2]).data("upcomingPanelIndex",this.panel),n(this.carouselPanels[0]).data("upcomingPanelIndex",this.panel===this.options.panels-1?0:this.panel+1));this.slide()},handleEvent:function(n){switch(n.type){case f:this.start(n);break;case e:this.move(n);break;case v:case o:this.end(n)}},getPosition:function(n){this.x=n;this.track.style[a]="translate("+n+"px,0) translateZ(0)"},resize:function(){this.refreshSize();this.track.style[i]="0s";this.getPosition(-this.panel*this.panelWidth)},start:function(n){if(!this.initiated){var t=u?n.touches[0]:n;this.initiated=!0;this.moved=!1;this.thresholdExceeded=!1;this.startX=t.pageX;this.startY=t.pageY;this.pointX=t.pageX;this.pointY=t.pageY;this.stepsX=0;this.stepsY=0;this.directionX=0;this.directionLocked=!1;this.track.style[i]="0s";this.event("touchstart")}},move:function(n){if(this.initiated){var t=u?n.touches[0]:n,i=t.pageX-this.pointX,f=t.pageY-this.pointY,r=this.x+i,e=Math.abs(t.pageX-this.startX);if(this.moved=!0,this.pointX=t.pageX,this.pointY=t.pageY,this.directionX=i>0?1:i<0?-1:0,this.stepsX+=Math.abs(i),this.stepsY+=Math.abs(f),!(this.stepsX<10)||!(this.stepsY<10)){if(!this.directionLocked&&this.stepsY>this.stepsX){this.initiated=!1;return}n.preventDefault();this.directionLocked=!0;!this.options.loop&&(r>0||r<this.maxX)&&(r=this.x+i/2);this.getPosition(r)}}},end:function(n){if(this.initiated){var r=u?n.changedTouches[0]:n,t=Math.abs(r.pageX-this.startX);if(this.initiated=!1,this.moved){if(!this.options.loop&&(this.x>0||this.x<this.maxX)&&(t=0),t<this.snapThreshold){this.track.style[i]=Math.floor(300*t/this.snapThreshold)+"ms";this.getPosition(-this.panel*this.panelWidth);return}this.checkPosition()}}},checkPosition:function(){var t,r,f,u;this.carouselPanels[this.currentPanel].className="";this.directionX>0?(this.panel=-Math.ceil(this.x/this.panelWidth),this.currentPanel=this.panel+1-Math.floor((this.panel+1)/3)*3,t=this.currentPanel-1,t=t<0?2:t,this.carouselPanels[t].style.left=this.panel*100-100+"%",r=this.panel-1):(this.panel=-Math.floor(this.x/this.panelWidth),this.currentPanel=this.panel+1-Math.floor((this.panel+1)/3)*3,t=this.currentPanel+1,t=t>2?0:t,this.carouselPanels[t].style.left=this.panel*100+100+"%",r=this.panel+1);f=this.carouselPanels[this.currentPanel].className;/(^|\s)carousel-panel-active(\s|$)/.test(f)||(this.carouselPanels[this.currentPanel].className=f?f+" carousel-panel-active":"carousel-panel-active");f=this.carouselPanels[t].className;r=r-Math.floor(r/this.options.panels)*this.options.panels;n(this.carouselPanels[t]).data("upcomingPanelIndex",r);u=-this.panel*this.panelWidth;this.track.style[i]=Math.floor(500*Math.abs(this.x-u)/this.panelWidth)+"ms";this.options.loop||(this.carouselPanels[t].style.visibility=u===0||u===this.maxX?"hidden":"");this.x===u?this.slide():(this.getPosition(u),this.slide())},slide:function(){this.event("move")},event:function(n){var t=document.createEvent("Event");t.initEvent("carousel-panel-"+n,!0,!0);this.carouselContainer.dispatchEvent(t)}},h}();n.extend({UISetupCarousel:function(i){function h(n){var t=n.shift(0);return n.reverse(),n.unshift(t),n}var r,o,f,e,u,s;if(i){for(i.loop=i.loop||!1,r=new t({target:i.target,panels:i.panels.length,loop:i.loop,pagination:i.pagination}),n(i.target).data("carousel",r),n.isRTL&&(i.panels=h(i.panels)),f=0;f<3;f++)o=f===0?i.panels.length-1:f-1,r.carouselPanels[f].innerHTML=i.panels[Number(o)];e=0;u=n(i.target).next("ul.pagination");r.onSlide(function(){for(var f,t=0;t<3;t++)f=n(r.carouselPanels[t]).data("upcomingPanelIndex"),r.carouselPanels[t].innerHTML=i.panels[Number(f)];e=n(".carousel-panel-active").data("upcomingPanelIndex");u.find("li").removeClass("selected");n.isRTL?(u.find("li").removeClass("selected"),e<1?u.find("li").eq(0).addClass("selected"):u.find("li").eq(i.panels.length-e).addClass("selected")):u.find("li").eq(e).addClass("selected")});n(i.target).on("mousedown","img",function(){return!1});s=n(i.target).css("width");u.css("width",s);u.on("click","li",function(){var t,i;n(this).siblings("li").removeClass("selected");n(this).addClass("selected");t=0;n.isRTL?(i=n(this).parent().children("li").length,n(this).index()===0?r.goToPanel(0):(t=i-n(this).index(),r.goToPanel(t)),n(this).siblings("li").removeClass("selected"),n(this).addClass("selected")):n(this).index()===0?r.goToPanel(0):r.goToPanel(n(this).index())})}}})});n.fn.extend({UIRange:function(){if(!n.isWin&&this[0].nodeName==="INPUT"){var t=n(this),i,u=t.width(),r=(t.val()-t.attr("min"))/(t.attr("max")-t.attr("min")),f=-1.3;r<0?i=0:r>1?i=u:(i=u*r+f,f-=r);n.isAndroid||n.isChrome?t.css({"background-size":Math.round(i)+"px 3px, 100% 2px"}):t.css({"background-size":Math.round(i)+"px 10px"})}}});n(function(){n("input[type=range]").forEach(function(t){n(t).UIRange()});n("body").on("input","input[type=range]",function(){n(this).UIRange()})});n.extend({UISelectBox:function(){var i=function(n){var t;t=document.createEvent("MouseEvents");t.initMouseEvent("mousedown",!0,!0,window);n.dispatchEvent(t)},t;if(!n.isDesktop&&n.isiOS){n(".select-box-label").forEach(function(t){var r=n(t),i=r.prev();i[0].id||i.attr("id",n.Uuid());i.trigger("singletap");r.text(i.val());r.attr("for",i.attr("id"))});n(".select-box select").on("change",function(){n(this).next().text(n(this).val())})}else if(!n.isDesktop&&(t=function(n){var t;t=document.createEvent("MouseEvents");t.initMouseEvent("mousedown",!0,!0,window);n.dispatchEvent(t)},!n.isDesktop)){n(".select-box-label").forEach(function(t){t.id||n(t).prev().attr("id",n.Uuid());var i=n(t).siblings("select").val();n(t).text(i)});n(".select-box select").on("change",function(){var i=n(this).find("option:selected").text(),t=n(this);t.next("label").text(n(this).val());t.siblings("label").text(i)});n("body").on("singletap",".select-box-label",function(){t(n("select")[0])})}}});n(function(){n.UISelectBox()});n.extend(n,{UIBindData:function(t){var r,i,u;r=t?n("[data-controller="+t+"]"):n("[data-controller]");i=[];u=function(t){var r="data-binding-"+n(t).attr("data-controller");i.push(r)};r.forEach(function(t,r){var f=n(t).attr("data-controller");u(t);n.subscribe(i[r],function(t,i){var r="[data-model="+f+"]";n(r).text(i)})});n("body").on("input change","[data-controller]",function(){var t="data-binding-"+n(this).attr("data-controller");n.publish(t,n(this).val())})},UIUnBindData:function(t){delete n.subscriptions["data-binding-"+t]}})}(window.CHUIJSLIB);
//# sourceMappingURL=chui.min.js.map
